{"mappings":"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","sources":["src/my-library.js"],"sourcesContent":["import Notiflix from 'notiflix';\n//?  Импорт spinner (Loader ==> isLoadin)\nimport spinner from './js/preLoader';\n\n// import ThemoviedbApiService from './js/api-themoviedb.js';\n\n//* +++++++++++++++++++++++++++++++++++ Импорты файлов ++++++++++++++++++++++++++++++++++++++++++++\n\nexport default function getRefs() {\n  return {\n    //! Получаем ссылку на div-контейнер для разметки карточек изображений:\n    moviesCards: document.querySelector('ul[data-action=\"movies-cards\"]'),\n    //! Получаем ссылку на div-контейнер для разметки карточек изображений:\n    InfoMovie: document.querySelector('div[data-action=\"modal-markup\"]'),\n    //! Получаем ссылку на кнопку HOME:\n    homeBtn: document.querySelector('a[data-action=\"button-home\"]'),\n    //! Получаем ссылку на кнопку Filmoteka:\n    filmotekaBtn: document.querySelector('a[data-action=\"button-filmoteka\"]'),\n    //! Получаем ссылку на кнопку MY LIBRARY:\n    myLibraryBtn: document.querySelector('a[data-action=\"button-mylibrary\"]'),\n    //! Получаем ссылки для модалки:\n    closeModalBtn: document.querySelector('[data-action=\"close-modal\"]'),\n    backdrop: document.querySelector('.js-backdrop'),\n\n    //! Получаем ссылку на строку предупреждения об отсутствии фильмов:\n    resultNotSuccessful: document.querySelector('[data-action=\"search-alert\"]'),\n    //! Получаем ссылку на блок кнопок WATCHED и QUEUE в header:\n    watchedQueueHeader: document.querySelector('[data-action=\"library-btn\"]'),\n    //! Получаем ссылку на кнопоку WATCHED в header:\n    watchedHeader: document.querySelector('[data-action=\"library-watched\"]'),\n    //! Получаем ссылку на кнопоку QUEUE в header:\n    queueHeader: document.querySelector('[data-action=\"library-queue\"]'),\n  };\n}\nfunction getRefsLibrary() {\n  return {\n    //! Получаем ссылку на div-контейнер для разметки карточек изображений:\n    moviesCards: document.querySelector('ul[data-action=\"movies-cards\"]'),\n    //! Получаем ссылку на div-контейнер для разметки карточек изображений:\n    InfoMovie: document.querySelector('div[data-action=\"modal-markup\"]'),\n    //! Получаем ссылку на кнопку HOME:\n    homeBtn: document.querySelector('a[data-action=\"button-home\"]'),\n    //! Получаем ссылку на кнопку Filmoteka:\n    filmotekaBtn: document.querySelector('a[data-action=\"button-filmoteka\"]'),\n    //! Получаем ссылку на кнопку MY LIBRARY:\n    myLibraryBtn: document.querySelector('a[data-action=\"button-mylibrary\"]'),\n    //! Получаем ссылку на <section class=\"section-hero\"> ==> на poster_path:\n    movieDetails: document.querySelector('section[data-action=\"section-hero\"]'),\n\n    //! Получаем ссылки для модалки:\n    // openModalBtn: document.querySelector('[data-action=\"open-modal\"]'), //! ----- для тестирования\n    closeModalBtn: document.querySelector('[data-action=\"close-modal\"]'),\n    backdrop: document.querySelector('.js-backdrop'),\n\n    //! Получаем ссылку на строку предупреждения об отсутствии фильмов:\n    resultNotSuccessful: document.querySelector('[data-action=\"search-alert\"]'),\n    //! Получаем ссылку на блок кнопок WATCHED и QUEUE в header:\n    watchedQueueHeader: document.querySelector('[data-action=\"library-btn\"]'),\n    //! Получаем ссылку на кнопоку WATCHED в header:\n    watchedHeader: document.querySelector('[data-action=\"library-watched\"]'),\n\n    //! Получаем ссылку на кнопоку QUEUE в header:\n    queueHeader: document.querySelector('[data-action=\"library-queue\"]'),\n  };\n}\n//! Создаем объект всех ссылок refs.*\nconst refs = getRefsLibrary();\n\n// console.log(\"refs:\", refs); //!\n\n// export const themoviedbApiService = new ThemoviedbApiService();\n//* +++++++++++++++++++++++++++++++ Создаем ВСЕХ слушателей +++++++++++++++++++++++++++++++++++++++++\n\n//!  Создаем слушателя событий на поле ввода данных - input form:\n// refs.searchForm.addEventListener('submit', onFormMoviesSearch); //! +-+-+-\n\n//!  Создаем слушателя событий на кнопке LOAD MORE:\n// loadMoreBtn.refs.button.addEventListener('click', onLoadMore);\n\n//! Создаем слушателя событий на кнопке HOME:\n// refs.homeBtn.addEventListener('click', onHome);\n\n//! Создаем слушателя событий на кнопке Filmoteka:\n// refs.filmotekaBtn.addEventListener('click', onHome);\n\n//! Создаем слушателя событий на кнопке MY LIBRARY:\nrefs.myLibraryBtn.addEventListener('click', onMyLibraryWatched);\n\n//! Создаем слушателя событий на <section class=\"section-hero\"> ==> на poster_path:\nrefs.movieDetails.addEventListener('click', onMovieDetails);\n\n//! +++++++++++++++++++ Создаем слушателей для МОДАЛКИ ++++++++++++++++++++++++\n// refs.openModalBtn.addEventListener('click', onOpenModal); //? ----- для тестирования\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\n//! +++++++++ Создаем слушателей на кнопках <ADD TO WATCHED> и <ADD TO QUEUE> для МОДАЛКИ ++++++++++++++\n// refs.watchedModal.addEventListener('click', onWatchedModal); //!!! +-+-+-+-\n// refs.queueModal.addEventListener('click', onQueueModal); //!!! +-+-+-+-\n// console.log('Слушатели_refs.watchedModal:', refs.watchedModal); //!\n// console.log('Слушатели_refs.queueModal:', refs.queueModal); //!\n//! Импортируем ГОТОВЫХ слушателей на кнопках <ADD TO WATCHED> и <ADD TO QUEUE> для МОДАЛКИ\n// import addIventListenerModalBtn from './js/addIventListenerModalBtn.js'; //! пока не надо, поключена ЛОКАЛЬНО\n\n//! ++++ Создаем слушателей на кнопках WATCHED и QUEUE для страницы MY LIBRARY +++++++\nrefs.watchedHeader.addEventListener('click', onMyLibraryWatched);\nrefs.queueHeader.addEventListener('click', onQueue);\n\n//! ++++++++++++++++++ ПОКАЗЫВАЕМ/ПРЯЧЕМ элементы разметки ++++++++++++++++++++\n//? ПОКАЗЫВАЕМ форму со строкой инпута:\n// refs.searchFormAlert.hidden = true; //! ПРЯЧЕМ\n// refs.searchFormAlert.hidden = false; //! ПОКАЗЫВАЕМ  +-+-+-+-\n\n//? ПРЯЧЕМ строку предупреждения об отсутствии фильмов:\n// refs.resultNotSuccessful.hidden = true;\n\n//? ПРЯЧЕМ блок кнопок WATCHED и QUEUE в header:\n// refs.watchedQueueHeader.hidden = true; +-+-+-+-\n\n//* +++++++++++++++++++++++++++++++ Создаем ГЛОБАЛЬНЫЕ переменные +++++++++++++++++++++++++++++++++++++++++\n\n//! Создаем глобальную переменную (films) для хранения значение всей (results)\nlet films = [];\n\n//! Создаем глобальную переменную (idFilms) для хранения idF одного фильма\nlet idFilms = 1;\n\n//! Создаем глобальную переменную (infoFilm) для хранения полной информации об одном фильме\nlet infoFilm = null;\n\n//! Переменная для определения типа запроса в кнопке LOAD MORE\n//! и типа станиц WATCHED и QUEUE\nlet currentPage = '';\n\n//! Переменные для хранения массива объектов фильмов для станиц WATCHED и QUEUE\nlet localStorageWatched = JSON.parse(localStorage.getItem('watched')) ?? [];\nlet localStorageQueue = JSON.parse(localStorage.getItem('queue')) ?? [];\n\n//* +++++++++++++++++++++++++++++++++++++++ Блок Функций  +++++++++++++++++++++++++++++++++++++++++++++++++\n\n//? Тестируем-консолим тип жанра по его id\n// console.log(\"genres:\", genres); //!\n// const genreName = convertingIdToGenre(10770);\n// console.log(\"genreName:\", genreName); //!\n\n//!!!!!! Загрузка популярных фильмов на главную (первую) страницу (без нажатия на кнопки HOME или Filmoteka)\n// onHome();\n\n//* -------------------------- Ф-ция-запрос_1, к-рая прослушивает события на кнопке HOME: ----------------------\n\n//* ---------- Ф-ция-запрос_2, к-рая прослушивает события на поле ввода данных - input form:-------\n\n//* -------------------------- Ф-ция-запрос_3, к-рая запрашивает полную информацию об одном фильме: ----------------------\n//! +++ Запрос полной информации о фильме для МОДАЛКИ +++\nasync function onMovieDetails(event) {\n  console.log('Вешаю слушателя на открытие МОДАЛКИ (onMovieDetails)'); //!\n  //? !!!!!!! ПОЛУЧАЕМ (id) фильма по клику на карточке фильма !!!!!!!!!!!!!!!\n  if (event.target.closest('li')) {\n    const itemId = event.target.closest('li');\n    // console.log(\"itemId:\", itemId); //!\n    idFilms = Number(itemId.getAttribute('key')); \n    getfilmForModalFromLS(idFilms)\n    console.log('idFilms:', idFilms); //!\n  } else return;\n  //?__________ ПОЛУЧАЕМ (id) фильма по клику на карточке фильма __________\n  let filmForMyLiberyModal ={}\n  \n  // шукає об'єкт по ID\n  async  function getfilmForModalFromLS (id) {\n    JSON.parse(localStorage.getItem('watched')).find((film)=>{\n      console.log(film);\n    if (film.id===id) {\n   return filmForMyLiberyModal = film; }\n    } )\n    JSON.parse(localStorage.getItem('queue')).find((film)=>{\n      if (film.id===id) {\n        return filmForMyLiberyModal = film }\n      } )\n  }\n    console.log(filmForMyLiberyModal);\n  //! ПОКАЗЫВАЕМ Spinner\n  spinner.startSpinner();\n\n  //! ==> Делаем запрос-3 полной информации о фильме для МОДАЛКИ.\n  // try {\n  //   const results = await themoviedbApiService.getMovieDetails(idFilms);\n  //   //! Очищаем контейнер МОДАЛКИ:\n  //   clearModalContainer();\n  //   //! Перезаписываем в глобальную переменную (films) значение всей (results)\n  //   infoFilm = results;\n  // } catch (error) {\n  //   //! Очищаем контейнер МОДАЛКИ:\n  //   clearModalContainer();\n  //   //! Прячем Spinner\n  //   spinner.removeSpinner();\n  //   //! Очищаем контейнер переменную (films):\n  //   infoFilm = null;\n  //   console.log(error); //!\n  //   Notiflix.Notify.failure(`Ошибка запроса: ${error.message}`, {\n  //     timeout: 3500,\n  //   });\n  // }\n  //? ------- Получаем и консолим все данные для рендера разметки главной страницы -------\n  // console.log(\"getMovieDetails ==> infoFilm:\", infoFilm); //!\n  // const titleOrName = infoFilm.title || infoFilm.name;\n  // console.log(\"titleOrName:\", titleOrName);\n  // console.log(\"id:\", infoFilm.id); //!\n  // console.log(\"poster_path:\", infoFilm.poster_path);\n  // console.log(\"Vote:\", infoFilm.vote_average);\n  // console.log(\"Votes:\", infoFilm.vote_count);\n  // console.log(\"Popularity:\", infoFilm.popularity);\n  // const originalTitleOrName = infoFilm.original_title || infoFilm.original_name;\n  // console.log(\"Original Title:\", originalTitleOrName);\n  // const genresAllOneFilm = infoFilm.genres.map(item => item.name).join(\", \");\n  // console.log(\"Genre:\", genresAllOneFilm); //! строка всех жанров\n  // console.log(\"About:\", infoFilm.overview);\n  //?_________________КОНЕЦ Получения и консоли всех данных _____________________\n\n  //! ==> Открываем модалку\n  window.addEventListener('keydown', onEscKeyPress);\n  document.body.classList.add('show-modal');\n\n  //! Прячем Spinner\n  spinner.removeSpinner();\n\n  //! Рисование интерфейса\n  // appendInfoMovieMarkup(infoFilm);\n\n  //! Добавляем ГОТОВЫХ слушателей на кнопках <ADD TO WATCHED> и <ADD TO QUEUE> для МОДАЛКИ\n  // addIventListenerModalBtn();\n\n  //! Вызываем БЛОК ЛОГИКИ работы кнопок <ADD TO WATCHED> и <ADD TO QUEUE>\n  // operationLogicWatchedQueue();\n}\n\n//* -------------- Ф-ция_4, ДОБАВЛЕНИЕ/УДАЛЕНИЕ просмотренных фильмов в localStorage по кноке ADD TO WATCHED: ----------\n//! +++ Запрос полной информации о фильме для МОДАЛКИ +++\nfunction onWatchedModal() {\n  console.log('Вешаю слушателя на кнопку ADD TO WATCHED в МОДАЛКЕ'); //!\n\n  console.log('infoFilm:', infoFilm); //!\n  console.log('infoFilm.id:', infoFilm.id); //!\n\n  console.log('Ф-ция_4_refs.watchedModal ==>:', refs.watchedModal); //!\n\n  const textWatchedModal = refs.watchedModal.textContent;\n  console.log('textWatchedModal ==> начало:', textWatchedModal); //!\n\n  if (textWatchedModal === 'ADD TO WATCHED') {\n    //! Блокировка повторной записи фильма в localStorage (ВРЕМЕННО)\n    if (localStorageWatched.find(option => option.id === infoFilm.id)) {\n      Notiflix.Notify.warning(\n        `Фильм ${infoFilm.title || infoFilm.name} уже есть в WATCHED`,\n        { timeout: 3500 }\n      );\n      refs.watchedModal.textContent = 'DELETE FROM WATCHED';\n      if (refs.watchedModal.classList.contains('colorGreen'))\n        refs.watchedModal.classList.remove('colorGreen');\n      if (!refs.watchedModal.classList.contains('colorRed'))\n        refs.watchedModal.classList.add('colorRed');\n      return;\n    }\n    //! Запись фильма в localStorage\n    localStorageWatched = [...localStorageWatched, infoFilm];\n    console.log('localStorageWatched:', localStorageWatched); //!\n    localStorage.setItem('watched', JSON.stringify(localStorageWatched));\n    Notiflix.Notify.success(\n      `Фильм ${infoFilm.title || infoFilm.name} добавлен в WATCHED`,\n      { timeout: 3500 }\n    );\n    //! Смена названия (textContent) кнопки на \"DELETE FROM WATCHED\"\n    refs.watchedModal.textContent = 'DELETE FROM WATCHED';\n    if (refs.watchedModal.classList.contains('colorGreen'))\n      refs.watchedModal.classList.remove('colorGreen');\n    if (!refs.watchedModal.classList.contains('colorRed'))\n      refs.watchedModal.classList.add('colorRed');\n    console.log('textWatchedModal ==> конец:', textWatchedModal); //!\n  } else {\n    if (textWatchedModal === 'DELETE FROM WATCHED') {\n      localStorageWatched = localStorageWatched.filter(\n        item => item.id !== infoFilm.id\n      );\n      localStorage.setItem('watched', JSON.stringify(localStorageWatched));\n      console.log('Фильм удален из WATCHED'); //!\n      Notiflix.Notify.info(\n        `Фильм ${infoFilm.title || infoFilm.name} удален из WATCHED`,\n        { timeout: 3500 }\n      );\n      refs.watchedModal.textContent = 'ADD TO WATCHED';\n      if (refs.watchedModal.classList.contains('colorRed'))\n        refs.watchedModal.classList.remove('colorRed');\n      if (!refs.watchedModal.classList.contains('colorGreen'))\n        refs.watchedModal.classList.add('colorGreen');\n\n      if (currentPage === 'watched') {\n        console.log('currentPage', currentPage); //!\n        onCloseModal();\n        //! Очищаем контейнер:\n        clearMovieContainer();\n        appendWatchedQueueMarkup(localStorageWatched);\n      }\n    }\n  }\n}\n\n//* ------------------ Ф-ция_5, ДОБАВЛЕНИЕ/УДАЛЕНИЕ просмотренных фильмов в localStorage по кноке ADD TO QUEUE: --------------\n//! +++ Запрос полной информации о фильме для МОДАЛКИ +++\nfunction onQueueModal() {\n  console.log('Вешаю слушателя на кнопку ADD TO QUEUE в МОДАЛКЕ'); //!\n\n  console.log('infoFilm:', infoFilm); //!\n  console.log('infoFilm.id:', infoFilm.id); //!\n\n  const textQueuedModal = refs.queueModal.textContent;\n  console.log('textQueuedModal ==> начало:', textQueuedModal); //!\n\n  if (textQueuedModal === 'ADD TO QUEUE') {\n    //! Блокировка повторной записи фильма в localStorage (ВРЕМЕННО)\n    if (localStorageQueue.find(option => option.id === infoFilm.id)) {\n      Notiflix.Notify.warning(\n        `Фильм ${infoFilm.title || infoFilm.name} уже есть в QUEUE`,\n        { timeout: 3500 }\n      );\n      refs.queueModal.textContent = 'DELETE FROM QUEUE';\n      if (refs.queueModal.classList.contains('colorGreen'))\n        refs.queueModal.classList.remove('colorGreen');\n      if (!refs.queueModal.classList.contains('colorRed'))\n        refs.queueModal.classList.add('colorRed');\n      return;\n    }\n    //! Запись фильма в localStorage\n    localStorageQueue = [...localStorageQueue, infoFilm];\n    console.log('localStorageQueue:', localStorageQueue); //!\n    localStorage.setItem('queue', JSON.stringify(localStorageQueue));\n    Notiflix.Notify.success(\n      `Фильм ${infoFilm.title || infoFilm.name} добавлен в QUEUE`,\n      { timeout: 3500 }\n    );\n    //! Смена названия (textContent) кнопки на \"DELETE FROM QUEUE\"\n    refs.queueModal.textContent = 'DELETE FROM QUEUE';\n    if (refs.queueModal.classList.contains('colorGreen'))\n      refs.queueModal.classList.remove('colorGreen');\n    if (!refs.queueModal.classList.contains('colorRed'))\n      refs.queueModal.classList.add('colorRed');\n    console.log('textQueuedModal ==> конец:', textQueuedModal); //!\n  } else {\n    if (textQueuedModal === 'DELETE FROM QUEUE') {\n      localStorageQueue = localStorageQueue.filter(\n        item => item.id !== infoFilm.id\n      );\n      localStorage.setItem('queue', JSON.stringify(localStorageQueue));\n      console.log('Фильм удален из QUEUE');\n      Notiflix.Notify.info(\n        `Фильм ${infoFilm.title || infoFilm.name} удален из QUEUE`,\n        { timeout: 3500 }\n      );\n      refs.queueModal.textContent = 'ADD TO QUEUE';\n      if (refs.queueModal.classList.contains('colorRed'))\n        refs.queueModal.classList.remove('colorRed');\n      if (!refs.queueModal.classList.contains('colorGreen'))\n        refs.queueModal.classList.add('colorGreen');\n      if (currentPage === 'queue') {\n        console.log('currentPage', currentPage); //!\n        onCloseModal();\n        //! Очищаем контейнер:\n        clearMovieContainer();\n        appendWatchedQueueMarkup(localStorageQueue);\n      }\n    }\n  }\n}\nonMyLibraryWatched();\n//* -------------------------- Ф-ция_6, для работы с MY LIBRARY или кнопкой WATCHED: ----------------------\nfunction onMyLibraryWatched() {\n  // console.log('Вешаю слушателя на кнопку my-library.js==>WATCHED'); //!\n\n  // refs.watchedModal.textContent = \"DELETE FROM WATCHED\";\n  //! Назначаем тип станицы WATCHED для логики работы кнопок МОДАЛКИ\n  currentPage = 'watched';\n\n  //! ПРЯЧЕМ строку предупреждения об отсутствии фильмов:\n  // refs.resultNotSuccessful.hidden = true;\n\n  //! ПРЯЧЕМ форму со строкой инпута:\n  // refs.searchFormAlert.hidden = true;\n\n  //! ПОКАЗЫВАЕМ блок кнопок WATCHED и QUEUE в header:\n  // refs.watchedQueueHeader.hidden = false;\n\n  //! Кнопка LOAD MORE => показываем и отключаем\n  // loadMoreBtn.show();\n  // loadMoreBtn.hide(); //! Временно => ПРЯЧЕМ\n  // loadMoreBtn.disable();\n\n  //! Очищаем контейнер:\n  clearMovieContainer();\n\n  //! Перезаписываем в локальную переменную (results) значение всего (localStorage)\n  const results = JSON.parse(localStorage.getItem('watched')) ?? [];\n  // console.log('results:', results); //!\n\n  //! Рисование интерфейса\n  appendWatchedQueueMarkup(results);\n\n  //! Кнопка LOAD MORE => включаем\n  // loadMoreBtn.enable();\n}\n\n//* -------------------------- Ф-ция_7, для работы с кнопкой QUEUEв MY LIBRARY : ----------------------\nfunction onQueue() {\n  console.log('Вешаю слушателя на кнопку my-library.js==>QUEUE'); //!\n\n  //! Назначаем тип станицы QUEUE для логики работы кнопок МОДАЛКИ\n  currentPage = 'queue';\n\n  //! ПРЯЧЕМ строку предупреждения об отсутствии фильмов:\n  // refs.resultNotSuccessful.hidden = true;\n\n  //! ПРЯЧЕМ форму со строкой инпута:\n  // refs.searchFormAlert.hidden = true;\n\n  //! ПОКАЗЫВАЕМ блок кнопок WATCHED и QUEUE в header:\n  // refs.watchedQueueHeader.hidden = false;\n\n  //! Кнопка LOAD MORE => показываем и отключаем\n  // loadMoreBtn.show();\n  // loadMoreBtn.hide(); //! Временно => ПРЯЧЕМ\n  // loadMoreBtn.disable();\n\n  //! Очищаем контейнер:\n  clearMovieContainer();\n\n  //! Перезаписываем в локальную переменную (results) значение всего (localStorage)\n  const results = JSON.parse(localStorage.getItem('queue')) ?? [];\n  console.log('results:', results); //!\n\n  //! Рисование интерфейса\n  appendWatchedQueueMarkup(results);\n\n  //! Кнопка LOAD MORE => включаем\n  // loadMoreBtn.enable();\n}\n\n//* ++++++++++++++++++++++++++++++++ Кнопка LOAD MORE (для Ф-ции-запрос ==> ОБЩАЯ - для 1 и 2) ++++++++++++++++++++++++++++++++++++++++++++\n//!  Ф-ция, к-рая прослушивает события на кнопке LOAD MORE:\nasync function onLoadMore() {\n  //! Кнопка LOAD MORE => ВЫключаем\n  // loadMoreBtn.disable()\n\n  //! проверяеm значения переменной (currentPage)\n  //! и СРАЗУ получаем в переменной films нужный массив объектов\n  //! для отрисовки следующих 20 фильмов\n  await checkResults();\n\n  // console.log(\"onLoadMore ==> films:\", films); //!\n\n  //! Очищаем контейнер:\n  clearMovieContainer();\n\n  //!  Проверка results на ОКОНЧАНИЕ КОЛЛЕКЦИИИ\n  // checkResultsForEnd(endOfCollection);\n\n  //! Рисование интерфейса\n  appendMoviesMarkup(films);\n\n  //! Кнопка LOAD MORE => включаем\n  // loadMoreBtn.enable();\n}\n//* +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n\n//* ---------------------------------------------- Функции-вызывалки ;-) ----------------------------------------------\n//! ++++++++++++++ Ф-ция, к-рая проверяет значения переменной (currentPage) для определения типа запроса в кнопке LOAD MORE ++++++++++++++\nasync function checkResults() {\n  if (currentPage === 'home-Filmoteka') {\n    const results = await themoviedbApiService.getTrendingAllDay();\n    films = results;\n    // console.log(\"home-Filmoteka ==> films:\", films); //!\n  } else {\n    if (currentPage === 'Movie search') {\n      const results = await themoviedbApiService.getSearchMovies();\n      films = results;\n      // console.log(\"Movie search ==> films:\", films); //!\n    } else {\n      return;\n    }\n  }\n}\n\n//! ++++++++++++++ Ф-ция, к-рая получает id жанра и возвращает тип жанра ++++++++++++++\n\n//! ++++++++++++++ Ф-ция, к-рая очищает контейнер при новом вводе данных в input form: ++++++++++++++\nfunction clearMovieContainer() {\n  refs.moviesCards.innerHTML = '';\n}\n\n//! ++++++++++++++ Ф-ция, к-рая очищает контейнер МОДАЛКИ: ++++++++++++++\nfunction clearModalContainer() {\n  refs.InfoMovie.innerHTML = '';\n}\n\n//! ++++++++++++++ Ф-ция, к-рая  прверяет results на пустой массив: ++++++++++++++\n\n//! +++++++++++++++++++++++ Функции для МОДАЛКИ +++++++++++++++++++++++++++\n//? ----- для тестирования открытия модалки по кнопке\n// function onOpenModal() {\n//     window.addEventListener('keydown', onEscKeyPress);\n//     document.body.classList.add('show-modal');\n// }\n\nfunction onCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  document.body.classList.remove('show-modal');\n  //! Очищаем контейнер МОДАЛКИ:\n  clearModalContainer();\n}\n\nfunction onBackdropClick(event) {\n  // console.log(event.currentTarget); //!\n  // console.log(event.target); //!\n  if (event.currentTarget === event.target) {\n    // console.log('Кликнули именно в бекдроп!!!!'); //!\n    onCloseModal();\n  }\n}\n\nfunction onEscKeyPress(event) {\n  // console.log(event.code); //!\n  // const ESC_KEY_CODE = 'Escape';\n  // const isEscKey = event.code === ESC_KEY_CODE;\n  // if (isEscKey) {\n  if (event.code === 'Escape') {\n    onCloseModal();\n  }\n}\n//!_____________________________________________________________________\n\n//! +++++++++ Создаем слушателей на кнопках <ADD TO WATCHED> и <ADD TO QUEUE> для МОДАЛКИ ++++++++++++++\nfunction addIventListenerModalBtn() {\n  refs.watchedModal = document.querySelector(\n    'button[data-action=\"modal-add-watched\"]'\n  );\n  refs.queueModal = document.querySelector(\n    'button[data-action=\"modal-add-queue\"]'\n  );\n\n  console.log('addIventListenerModalBtn_refs.watchedModal:', refs.watchedModal); //!\n  console.log('addIventListenerModalBtn_refs.queueModal:', refs.queueModal); //!\n\n  refs.watchedModal.addEventListener('click', onWatchedModal);\n  refs.queueModal.addEventListener('click', onQueueModal);\n\n  //! -----------------------------------------------------------------------------\n  // refs.watchedModal.addEventListener('click', () => {\n  //     console.log(\"Вешаю ГОТОВОГО слушателя на кнопку ADD TO WATCHED в МОДАЛКЕ\"); //!\n  // });\n\n  // refs.queueModal.addEventListener('click', () => {\n  //     console.log(\"Вешаю ГОТОВОГО слушателя на кнопку ADD TO QUEUE в МОДАЛКЕ\"); //!\n  // });\n}\n\n//!+++++++++++++ БЛОК ЛОГИКИ работы кнопок <ADD TO WATCHED> и <ADD TO QUEUE> ++++++++++++++++++\nfunction operationLogicWatchedQueue() {\n  console.log('БЛОК ЛОГИКИ_refs.watchedModal ==>:', refs.watchedModal); //!\n  console.log('БЛОК ЛОГИКИ_refs.queueModal ==>:', refs.queueModal); //!\n  //! Устанвливаем начальные значения textContent для кнопок WATCHED и QUEUE в модалке\n  //! в зависимости от того, на какой странице находится пользователь\n  refs.watchedModal.textContent = 'ADD TO WATCHED';\n  if (refs.watchedModal.classList.contains('colorRed'))\n    refs.watchedModal.classList.remove('colorRed');\n  if (!refs.watchedModal.classList.contains('colorGreen'))\n    refs.watchedModal.classList.add('colorGreen');\n  if (currentPage === 'watched') {\n    refs.watchedModal.textContent = 'DELETE FROM WATCHED';\n    if (refs.watchedModal.classList.contains('colorGreen'))\n      refs.watchedModal.classList.remove('colorGreen');\n    if (!refs.watchedModal.classList.contains('colorRed'))\n      refs.watchedModal.classList.add('colorRed');\n  }\n  refs.queueModal.textContent = 'ADD TO QUEUE';\n  if (refs.queueModal.classList.contains('colorRed'))\n    refs.queueModal.classList.remove('colorRed');\n  if (!refs.queueModal.classList.contains('colorGreen'))\n    refs.queueModal.classList.add('colorGreen');\n  refs.queueModal.classList.add('colorGreen');\n  if (currentPage === 'queue') {\n    refs.queueModal.textContent = 'DELETE FROM QUEUE';\n    if (refs.queueModal.classList.contains('colorGreen'))\n      refs.queueModal.classList.remove('colorGreen');\n    if (!refs.queueModal.classList.contains('colorRed'))\n      refs.queueModal.classList.add('colorRed');\n  }\n}\n\n//* --------------------------------------- Функции-разметки ---------------------------------------------------------\n//! +++++++++++++++++++++++++++++ Markup WATCHED и QUEUE ++++++++++++++++++++++++++++++++++++++++++++++\n//*  Ф-ция-then, к-рая отрисовывает интерфейс ВСЕХ карточек на странице:\nfunction appendWatchedQueueMarkup(results) {\n  //!   Добавляем новую разметку в div-контейнер с помощью insertAdjacentHTML:\n  refs.moviesCards.insertAdjacentHTML(\n    'beforeend',\n    createWatchedQueueCardsMarkup(results)\n  );\n}\n\n//! --------------------------------------------------------------------------------------------\n//*   Ф-ция, к-рая создает новую разметку для ОДНОЙ карточки из ВСЕХ карточек:\nfunction createWatchedQueueCardsMarkup(results) {\n  // console.log('results:', results);\n  return results\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        name,\n        genres,\n        first_air_date,\n        release_date,\n        vote_average,\n      }) => {\n        //? Получаем строку со всеми жанрами\n        const genresAllOneFilm = genres.map(item => item.name).join(', ');\n        // console.log(\"genresAllOneFilm:\", genresAllOneFilm); //!\n\n        //? Получаем значение года из строки даты:\n        const date = first_air_date || release_date || '???? - ?? - ??';\n        // console.log(\"date:\", date); //!\n        const yearDate = date.substr(0, 4); //! значение года из строки даты:\n        // console.log(\"yearDate:\", yearDate); //!\n\n        //?Убираем лишние знаки после запятой\n        const voteAverage = vote_average.toFixed(1);\n        // console.log(\"voteAverage:\", voteAverage); //!\n\n        //? Делаем заглавныее буквы в названии фильма (пока НЕ РАБОТАЕТ capitalsName)\n        let capitalsTitle = title;\n        if (title) {\n          capitalsTitle = title.toUpperCase();\n          // const title = title.toUpperCase();\n          // console.log(\"capitalsTitle:\", capitalsTitle); //!\n        }\n\n        let capitalsName = name;\n        if (name) {\n          const capitalsName = name.toUpperCase(); //!!! тут ошибка сделана СПЕЦИАЛЬНО!!!\n          // const name = name.toUpperCase();\n          // console.log(\"capitalsName:\", capitalsName); //!\n        }\n\n        return `\n                <li class=\"gallery__item\" key=${id}>\n                    <img class=\"gallery__img\" src=\"https://image.tmdb.org/t/p/w780${poster_path}\" alt=\"${\n          title || name\n        }\" />\n\n                    <div class=\"gallery__thumb\">\n                        <h2 class=\"gallery__title\">${\n                          capitalsTitle || capitalsName\n                        }</h2>\n                        <p class=\"gallery__text\">${genresAllOneFilm} &nbsp|&nbsp ${yearDate}&nbsp &nbsp${voteAverage}</p>\n                    </div>\n                </li>\n                `;\n      }\n    )\n    .join('');\n}\n\n//! +++++++++++++++++++++++++++++ Markup infoFilm ++++++++++++++++++++++++++++++++++++++++++++++\n//*  Ф-ция-then, к-рая отрисовывает интерфейс ОДНОГО фильма в МОДАЛКЕ:\nfunction appendInfoMovieMarkup(infoFilm) {\n  //!   Добавляем новую разметку в div-контейнер с помощью insertAdjacentHTML:\n  refs.InfoMovie.insertAdjacentHTML(\n    'afterbegin',\n    createInfoMovieMarkup(infoFilm)\n  );\n\n  //! Добавляем ГОТОВЫХ слушателей на кнопках <ADD TO WATCHED> и <ADD TO QUEUE> для МОДАЛКИ\n  // addIventListenerModalBtn(); //! НЕ СЮДА!!!\n}\n\n//! --------------------------------------------------------------------------------------------\n//*   Ф-ция, к-рая создает новую разметку ОДНОГО фильма в МОДАЛКЕ:\nfunction createInfoMovieMarkup(infoFilm) {\n  // console.log(\"createInfoMovieMarkup ==> infoFilm:\", infoFilm); //!\n  const {\n    id,\n    poster_path,\n    title,\n    name,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    original_name,\n    genres,\n    overview,\n  } = infoFilm;\n\n  //? Получаем строку со всеми жанрами\n  const genresAllOneFilm = genres.map(item => item.name).join(', ');\n\n  //? Делаем заглавныее буквы в названии фильма (пока НЕ РАБОТАЕТ capitalsName)\n  let capitalsTitle = title;\n  if (title) {\n    capitalsTitle = title.toUpperCase();\n    // const title = title.toUpperCase();\n    // console.log(\"capitalsTitle:\", capitalsTitle); //!\n  }\n\n  let capitalsName = name;\n  if (name) {\n    const capitalsName = name.toUpperCase(); //!!! тут ошибка сделана СПЕЦИАЛЬНО!!!\n    // const name = name.toUpperCase();\n    // console.log(\"capitalsName:\", capitalsName); //!\n  }\n\n  return `\n        <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${\n    title || name\n  }\" />\n        \n        <div class=\"modal-сontent\">\n            <h3 class=\"modal-title-film\">${capitalsTitle || capitalsName}</h3>\n            <table class=\"modal-info\">\n                <tbody>\n                    <tr>\n                        <td class=\"modal-key\">Vote/Votes</td>\n                        <td class=\"modal-parametr\"><span class=\"modal-parametr-vote\">${vote_average}</span> / ${vote_count}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"modal-key\">Popularity</td>\n                        <td class=\"modal-parametr\">${popularity}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"modal-key\">Original Title</td>\n                        <td class=\"modal-parametr\">${\n                          original_title || original_name\n                        }</td>\n                    </tr>\n                    <tr>\n                        <td class=\"modal-key\">Genre</td>\n                        <td class=\"modal-parametr\">${genresAllOneFilm}</td>\n                    </tr>\n                </tbody>\n            </table>\n            <div class=\"modal-about-film\">\n                <h5 class=\"modal-about-title\">ABOUT</h5>\n                <span class=\"modal-about-text\">${overview}</span>\n            </div>\n        \n            <div class=\"modal-button\" data-action=\"library-btn\">\n                <button type=\"button\" class=\"modal-watched\" data-action=\"modal-add-watched\">ADD TO WATCHED</button>\n                <button type=\"button\" class=\"modal-queue\" data-action=\"modal-add-queue\">ADD TO QUEUE</button>\n            </div>\n        </div>\n    `;\n}\n\n// --KHARLAMOVA TETIANA----------------МОДАЛЬНЕ ВІКНО З КОМАНДОЮ----------------------------------\n(() => {\n  const refsModalTeam = {\n    openModalTeamLink: document.querySelector('.team-link'),\n    closeModalTeamBtn: document.querySelector('.team-close-btn'),\n    modalTeam: document.querySelector('.backdrop-team'),\n    body: document.querySelector('body'),\n  };\n  const { openModalTeamLink, closeModalTeamBtn, modalTeam, body } =\n    refsModalTeam;\n  openModalTeamLink.addEventListener('click', onOpenModalTeam);\n  closeModalTeamBtn.addEventListener('click', onCloseModalTeam);\n  modalTeam.addEventListener('click', onBackdropTeamClick);\n\n  function onCloseModalTeam(e) {\n    modalTeam.classList.toggle('is-hidden');\n    body.classList.toggle('no-scroll');\n    window.removeEventListener('keydown', onEscKeyPress);\n  }\n\n  function onOpenModalTeam(e) {\n    window.addEventListener('keydown', onEscKeyPress);\n    modalTeam.classList.toggle('is-hidden');\n    body.classList.toggle('no-scroll');\n  }\n  function onEscKeyPress(e) {\n    if (e.key === 'Escape') {\n      onCloseModalTeam();\n    }\n  }\n\n  function onBackdropTeamClick(e) {\n    if (e.currentTarget === e.target) {\n      onCloseModalTeam();\n    }\n  }\n})();\n// -----------------------END OF МОДАЛЬНЕ ВІКНО З КОМАНДОЮ----------------------------\n"],"names":["parcelRequire","$865c390aa2d1ad34$var$refs","moviesCards","document","querySelector","InfoMovie","homeBtn","filmotekaBtn","myLibraryBtn","movieDetails","closeModalBtn","backdrop","resultNotSuccessful","watchedQueueHeader","watchedHeader","queueHeader","addEventListener","$865c390aa2d1ad34$var$onMyLibraryWatched","async","event","console","log","target","closest","itemId","$865c390aa2d1ad34$var$idFilms","Number","getAttribute","id","JSON","parse","localStorage","getItem","find","film","filmForMyLiberyModal","getfilmForModalFromLS","$g2eb2","default","startSpinner","window","$865c390aa2d1ad34$var$onEscKeyPress","body","classList","add","removeSpinner","$865c390aa2d1ad34$var$onCloseModal","currentTarget","ref3","$865c390aa2d1ad34$var$currentPage","$865c390aa2d1ad34$var$clearMovieContainer","results","$865c390aa2d1ad34$var$appendWatchedQueueMarkup","$865c390aa2d1ad34$var$ref","$865c390aa2d1ad34$var$ref1","ref2","innerHTML","removeEventListener","remove","code","insertAdjacentHTML","map","poster_path","title","name","genres","first_air_date","release_date","vote_average","genresAllOneFilm","item","join","yearDate","substr","voteAverage","toFixed","capitalsTitle","toUpperCase","capitalsName","$865c390aa2d1ad34$var$createWatchedQueueCardsMarkup","refsModalTeam","openModalTeamLink","closeModalTeamBtn","modalTeam","onCloseModalTeam","e","toggle","onEscKeyPress1","key"],"version":3,"file":"my-library.3d04ad7f.js.map"}